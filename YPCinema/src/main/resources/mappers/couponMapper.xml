<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="couponMapper">
	<cache />
	<sql id="CouponColumns">
		C_NUM,C_SPE,C_NAME,C_CONTENT,C_SCORE,C_SYMBOL
	</sql>
	<!-- Select Map Part -->
	<resultMap type="model.DTO.CouponDTO" id="couponMap">
		<id column="C_NUM" jdbcType="VARCHAR" property="c_num"/>
		<result column="C_SPE" jdbcType="VARCHAR" property="c_spe"/>
		<result column="C_NAME" jdbcType="VARCHAR" property="c_name"/>
		<result column="C_CONTENT" jdbcType="VARCHAR" property="c_content"/>
		<result column="C_SCORE" jdbcType="VARCHAR" property="c_score"/>
		<result column="C_SYMBOL" jdbcType="VARCHAR" property="c_symbol"/>
		<result column="MENU_NAME" jdbcType="VARCHAR" property="menu_name"/>
		<result column="MENU_TYPE" jdbcType="VARCHAR" property="menu_type"/>
	</resultMap>
	<!-- Select Part! -->
	<select id="selectLists" resultMap="couponMap">
		select <include refid="CouponColumns" /> from coupon
	</select>
	<select id="selectmenuTypes" resultMap="couponMap">
		select distinct MENU_TYPE from menu
	</select>
	<select id="selectmenuNames" parameterType="string" resultMap="couponMap">
		select MENU_NAME from menu
		<where>
			MENU_TYPE = #{menuType}
		</where>
	</select>
	<!-- Insert Part! -->
	<insert id="insertCoupon" parameterType="model.DTO.CouponDTO">
		insert into coupon (<include refid="CouponColumns" />) values(nextval('seq'),#{c_spe},#{c_name},#{c_content},#{c_score},#{c_symbol})
	</insert>
	<!-- Delete Part! -->
	<delete id="deleteCoupons">
		delete from coupon
		<where>
			<if test="seqs != null">
				c_num in
				<foreach collection="seqs" item="couponSeq" index="index" open="(" close=")" separator=",">
					#{couponSeq}
				</foreach>
			</if>
		</where>
	</delete>
</mapper>